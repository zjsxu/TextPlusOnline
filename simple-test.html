<!DOCTYPE html>
<html>
<head>
    <title>Simple Analytics Test</title>
</head>
<body>
    <h1>Simple Analytics Test</h1>
    <button onclick="testAnalytics()">Test Analytics</button>
    <div id="result"></div>

    <script src="js/analytics.js"></script>
    <script>
        function testAnalytics() {
            console.log('=== Testing Analytics ===');
            
            if (window.textDiffAnalytics) {
                console.log('✅ Analytics object exists');
                console.log('Session ID:', window.textDiffAnalytics.sessionId);
                
                const backendUrl = window.textDiffAnalytics.getBackendUrl();
                console.log('Backend URL:', backendUrl);
                
                // 测试发送事件
                window.textDiffAnalytics.trackFeatureUsage('test_button', {action: 'click'});
                console.log('✅ Test event sent');
                
                document.getElementById('result').innerHTML = `
                    <p>✅ Analytics object exists</p>
                    <p>Session ID: ${window.textDiffAnalytics.sessionId}</p>
                    <p>Backend URL: ${backendUrl || 'null'}</p>
                    <p>Test event sent - check console and backend</p>
                `;
            } else {
                console.log('❌ Analytics object not found');
                document.getElementById('result').innerHTML = '<p>❌ Analytics object not found</p>';
            }
        }

        // 自动测试
        window.addEventListener('load', () => {
            setTimeout(testAnalytics, 1000);
        });
    </script>
</body>
</html>